# 交通流量推导公式

## 输入
- `ebike_count` : 已知电动车数量
- `road_type_code` : 道路类型代码  
  - 1 = 高速公路  
  - 2 = 主干道
  - 3 = 次干道  
  - 4 = 支路  

## 固定参数
```python
bus_ratio   = {1: 0.015, 2: 0.04, 3: 0.02, 4: 0.005}
ebike_ratio = {1: 0.0, 2: 0.06, 3: 0.12, 4: 0.15}
walk_base_ratio = {1: 0, 2: 0.15, 3: 0.35, 4: 0.60}
w_walk      = 0.15   # 步行人次份额
O_car_avg   = 1.3    # 平均每车人数
```

## 计算流程
```python
# 求汽车数量
if ebike_ratio[road_type_code] == 0:
    car_count = 0            # 仅适用于高速公路，ebike_count 应为 0
else:
    car_count = ebike_count / ebike_ratio[road_type_code]

# 求公交车数量
bus_count = car_count * bus_ratio[road_type_code]

# 求步行者数量
pedestrian_count = walk_base_ratio[road_type_code] * car_count * O_car_avg * (w_walk / (1 - w_walk))
```

### 输出
- `car_count`
- `bus_count`
- `pedestrian_count`

